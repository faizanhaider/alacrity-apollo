(this.webpackJsonpalacrity=this.webpackJsonpalacrity||[]).push([[0],{156:function(e,t,n){},157:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var r=n(9),o=n(0),c=n.n(o),a=n(18),i=n.n(a),u=(n(156),n(157),n(105)),b=n(135),l=n(49),s=n(22),j=n(222),d=n(59),h=n(11),O=n(51),f=n(30),x=n.n(f);function k(){var e=Object(O.a)(["\n  fragment book on Book {\n    bookId,\n    title,\n    author,\n    price\n  }\n"]);return k=function(){return e},e}var v=x()(k());function g(){var e=Object(O.a)(["\n  query books {\n    books {\n      ...book\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function m(){var e=Object(O.a)(["\n  query book($bookId: Int!) {\n    book(bookId: $bookId) {\n      ...book\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var p=x()(m(),v),I=x()(g(),v),C=n(126),S=n(131),w=n.n(S),$=n(218),F=n(221),y=[{field:"bookId",headerName:"ID",width:70},{field:"",headerName:"Edit",sortable:!1,width:160,renderCell:function(e){return Object(r.jsx)(l.b,{to:"/books/".concat(e.getValue("bookId")),children:Object(r.jsx)(w.a,{})})}},{field:"title",headerName:"Title",width:130},{field:"author",headerName:"Author",width:130},{field:"price",headerName:"Price",width:130}],N=function(){var e=Object(u.useQuery)(I,{fetchPolicy:"network-only"}),t=e.data,n=e.loading,c=e.error,a=Object(o.useState)(0),i=Object(h.a)(a,2),b=i[0],s=i[1],j=Object(o.useState)(0),O=Object(h.a)(j,2),f=O[0],x=O[1];if(n)return Object(r.jsx)("div",{children:"Loading..."});if(c)return Object(r.jsxs)("div",{children:["Error! ",c.message]});var k=t.books.reduce((function(e,t){return e.push(Object(d.a)({id:t.bookId},t)),e}),[]);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(F.a,{children:Object(r.jsx)(l.b,{to:"/books/new",children:"Create New"})}),Object(r.jsxs)($.a,{variant:"h6",children:["Total Price for ",f," books: ",b.toFixed(2)]}),Object(r.jsx)("div",{style:{height:400,width:"100%"},children:Object(r.jsx)(C.a,{rows:k,columns:y,pageSize:5,checkboxSelection:!0,onSelectionChange:function(e){var n=e.rowIds;x(n.length),s(n.reduce((function(e,n){return e+=t.books.find((function(e){return e.bookId===Number(n)})).price}),0))}})})]})};function B(){var e=Object(O.a)(["\n  mutation editBook($bookId: Int!, $title: String!, $author: String!, $price: Float!) {\n    editBook(bookId: $bookId, title: $title, author: $author, price: $price) {\n      ...book\n    }\n  }\n  ","\n"]);return B=function(){return e},e}function P(){var e=Object(O.a)(["\n  mutation createBook($title: String!, $author: String!, $price: Float!) {\n    createBook(title: $title, author: $author, price: $price) {\n      ...book\n    }\n  }\n  ","\n"]);return P=function(){return e},e}var E=x()(P(),v),T=x()(B(),v),L=n(223),A=n(225),M=function(e){var t=e.defaultValues,n=e.onCancel,c=e.onSubmit,a=Object(o.useState)((null===t||void 0===t?void 0:t.title)||""),i=Object(h.a)(a,2),u=i[0],b=i[1],l=Object(o.useState)((null===t||void 0===t?void 0:t.price)||0),s=Object(h.a)(l,2),d=s[0],O=s[1],f=Object(o.useState)((null===t||void 0===t?void 0:t.author)||""),x=Object(h.a)(f,2),k=x[0],v=x[1],g=!!(d>0&&u.length&&k.length);return Object(r.jsx)(j.a,{maxWidth:"sm",children:Object(r.jsx)("form",{children:Object(r.jsxs)(L.a,{container:!0,spacing:3,children:[Object(r.jsx)(L.a,{item:!0,xs:12,children:Object(r.jsxs)(L.a,{container:!0,spacing:2,children:[Object(r.jsx)(L.a,{item:!0,xs:12,children:Object(r.jsx)(A.a,{error:!u.length,label:"Title",margin:"normal",value:u,onChange:function(e){return b(e.target.value)}})}),Object(r.jsx)(L.a,{item:!0,xs:12,children:Object(r.jsx)(A.a,{error:!(d>0),label:"Price",margin:"normal",value:d,onChange:function(e){return function(e){if(!e.target.value.replace(/[.0-9]/g,"").length){var t=parseFloat(e.target.value||"0").toFixed(2);O(parseFloat(t))}}(e)}})}),Object(r.jsx)(L.a,{item:!0,xs:12,children:Object(r.jsx)(A.a,{error:!k.length,label:"Author",margin:"normal",value:k,onChange:function(e){return v(e.target.value)}})})]})}),Object(r.jsxs)(L.a,{item:!0,xs:12,children:[Object(r.jsx)(F.a,{onClick:n,color:"secondary",children:"Cancel"}),Object(r.jsx)(F.a,{disabled:!g,onClick:function(){return c({price:d,title:u,author:k})},children:"Submit"})]})]})})})};function q(){var e=Object(s.f)(),t=Object(u.useMutation)(E,{onCompleted:function(){return e.push("/books")},onError:function(e){return alert("Failed to create book. ".concat(e.message))}}),n=Object(h.a)(t,1)[0];return Object(r.jsx)(M,{onCancel:function(){return e.push("/books")},onSubmit:function(e){n({variables:Object(d.a)({},e)})}})}var V=function(e){var t=e.bookId,n=Object(s.f)(),o=Object(u.useMutation)(T,{onCompleted:function(){return n.push("/books")},onError:function(e){return alert("Failed to update book. ".concat(e.message))}}),c=Object(h.a)(o,1)[0],a=Object(u.useQuery)(p,{variables:{bookId:t}}),i=a.data,b=a.loading,l=a.error;return b?Object(r.jsx)("div",{children:"Loading..."}):l?Object(r.jsxs)("div",{children:["Error! ",l.message]}):Object(r.jsx)(M,{defaultValues:i.book,onCancel:function(){return n.push("/books")},onSubmit:function(e){return c({variables:Object(d.a)({bookId:Number(t)},e)})}})};var D=function(){return Object(r.jsx)(j.a,{maxWidth:"sm",children:Object(r.jsx)(l.a,{children:Object(r.jsxs)(s.c,{children:[Object(r.jsx)(s.a,{exact:!0,path:"/",render:function(){return Object(r.jsx)(l.b,{to:"/books",children:"To List of Books"})}}),Object(r.jsx)(s.a,{exact:!0,path:"/books",render:function(){return Object(r.jsx)(N,{})}}),Object(r.jsx)(s.a,{exact:!0,path:"/books/new",render:function(){return Object(r.jsx)(q,{})}}),Object(r.jsx)(s.a,{exact:!0,path:"/books/:bookId",render:function(e){var t=e.match.params.bookId;return Object(r.jsx)(V,{bookId:Number(t)})}}),Object(r.jsx)(s.a,{path:"/notFound",render:function(){return Object(r.jsx)("div",{children:"Not Found"})}})]})})})},J=Object(b.a)({uri:"http://localhost:4567/graphql"}),Q=new u.ApolloClient({cache:new u.InMemoryCache,link:J});var W=function(){return Object(r.jsx)(u.ApolloProvider,{client:Q,children:Object(r.jsx)(D,{})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,228)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),c(e),a(e)}))};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(W,{})}),document.getElementById("root")),z()}},[[169,1,2]]]);
//# sourceMappingURL=main.f253a06e.chunk.js.map